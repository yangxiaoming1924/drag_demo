document.body.onload=function(){function a(){event.target.classList.contains('text')||(editing=!1,editing&&n.blur())}function c(t){n=t.target,editing=!0,n.focus()}function d(t){t.preventDefault(),f(t),null==p?p=setTimeout(function(){p=null},500):(clearTimeout(p),p=null,c(t))}function f(t){if(t.target.classList.contains('text')||(editing=!1,editing&&n.blur()),!editing){t.preventDefault(),moving=!0,++z,o=t.target,o.attributeName='test',b=o.getBoundingClientRect();var u=b.left+window.scrollX,v=b.top+window.scrollY;offsetX=t.pageX||t.changedTouches[0].pageX,offsetY=t.pageY||t.changedTouches[0].pageY,document.addEventListener('mousemove',function(w){if(!0===moving){var A=w.pageX-offsetX+u-o.initialOffsetX,B=w.pageY-offsetY+v-o.initialOffsetY,C='transform: translate('+A+'px, '+B+'px);z-index:'+z+';';o.setAttribute('style',C)}}),document.addEventListener('touchmove',function(w){var A=w.changedTouches;if(!0===moving)for(let E=0;E<A.length;E++){var B=A[E].pageX-offsetX+u-o.initialOffsetX,C=A[E].pageY-offsetY+v-o.initialOffsetY,D='transform: translate('+B+'px, '+C+'px);z-index:'+z+';';o.setAttribute('style',D)}})}}function g(){moving=!1}function h(t){var u=t.offsetHeight,v=getComputedStyle(t);return u+=parseInt(v.marginTop)+parseInt(v.marginBottom),u}var j='.draggable{cursor: move;display: inline-block;} .text:focus{cursor: auto;} .text-wrapper{width: 100%;position: relative;} .wrap{position: absolute;margin: auto;top: 0;bottom: 0;left: 0;right: 0;}\';',k=document.createElement('style');k.styleSheet?k.styleSheet.cssText=j:k.appendChild(document.createTextNode(j)),document.getElementsByTagName('head')[0].appendChild(k),console.log('done');var l=document.querySelectorAll('.draggable'),m=document.querySelectorAll('.text');z=1,editing=!1;var n,o,p=null;document.body.addEventListener('mousedown',a),document.body.addEventListener('touchstart',a);for(var q=0;q<l.length;q++)l[q].addEventListener('mousedown',f),l[q].addEventListener('touchstart',d),b=l[q].getBoundingClientRect(),l[q].initialOffsetX=b.left+window.scrollX,l[q].initialOffsetY=b.top+window.scrollY,l[q].x=b.left,l[q].y=b.top,l[q].style.cursor='move',document.addEventListener('mouseup',g),document.addEventListener('touchend',g);for(let t=0;t<m.length;t++){m[t].addEventListener('dblclick',c);var r=document.createElement('div');r.className='text-wrapper';var s=m[t].parentNode;s.insertBefore(r,m[t]),r.appendChild(m[t]),r.style.height=h(m[t])+'px';var r=document.createElement('div');r.className='wrap';var s=m[t].parentNode;s.insertBefore(r,m[t]),r.appendChild(m[t]),m[t].contentEditable='true'}};